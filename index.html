<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SokotXpress</title>
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:linear-gradient(135deg,#2b5876,#4e4376); color:#fff;}
    header { background:#222; padding:10px; display:flex; justify-content:space-between; align-items:center;}
    .logo { font-size:22px; font-weight:bold; color:#ffcc00;}
    nav ul { list-style:none; display:flex; gap:15px; }
    nav ul li a { color:#fff; text-decoration:none; }
    nav ul li a:hover { color:#ffcc00; }
    .hidden { display:none; }
    .container { max-width:900px; margin:20px auto; padding:20px; background:rgba(0,0,0,0.6); border-radius:10px;}
    input, select, button, textarea { width:100%; padding:10px; margin:5px 0; border-radius:6px; border:none;}
    button { background:#ffcc00; color:#000; font-weight:bold; cursor:pointer;}
    button:hover { background:#ffaa00;}
    .agent-card { background:#333; padding:15px; margin:10px 0; border-radius:10px;}
    .agent-card img { width:80px; height:80px; border-radius:50%; object-fit:cover;}
    .social-icons a { margin:0 5px; color:#ffcc00; text-decoration:none; font-size:20px;}
    footer { text-align:center; padding:15px; background:#111; margin-top:20px;}
  </style>
</head>
<body>

<header>
  <div class="logo">SokotXpress</div>
  <nav>
    <ul id="navLinks">
      <li><a href="#" onclick="showSection('home')">Home</a></li>
      <li><a href="#" onclick="showSection('agents')">Find Agent</a></li>
      <li><a href="#" onclick="showSection('registerAgent')">Join as Agent</a></li>
      <li><a href="#" onclick="logout()">Logout</a></li>
    </ul>
  </nav>
</header>

<!-- Registration/Login -->
<div id="authSection" class="container">
  <h2>Welcome to SokotXpress</h2>
  <p>Please Register or Login to continue</p>

  <div id="registerForm">
    <h3>Register</h3>
    <input type="text" id="regName" placeholder="Full Name" required>
    <input type="text" id="regUsername" placeholder="Username" required>
    <input type="tel" id="regPhone" placeholder="Phone Number" required>
    <input type="password" id="regPass" placeholder="Password" required>
    <button onclick="registerUser()">Register</button>
  </div>

  <div id="loginForm">
    <h3>Login</h3>
    <input type="text" id="loginUser" placeholder="Username">
    <input type="password" id="loginPass" placeholder="Password">
    <button onclick="loginUser()">Login</button>
  </div>
</div>

<!-- Home -->
<div id="home" class="container hidden">
  <h2>Track Your Delivery Agent in Real-Time</h2>
  <p>Connecting you with trusted delivery agents across Nigeria.</p>
</div>

<!-- Agents List -->
<div id="agents" class="container hidden">
  <h2>Find Delivery Agents</h2>
  <input type="text" id="searchAgent" placeholder="Search by username, phone or address" onkeyup="searchAgents()">
  <div id="agentList"></div>
</div>

<!-- Agent Registration -->
<div id="registerAgent" class="container hidden">
  <h2>Join as Delivery Agent</h2>
  <input type="file" id="agentPic" accept="image/*">
  <input type="text" id="agentName" placeholder="Full Name">
  <input type="text" id="agentUsername" placeholder="Username">
  <input type="tel" id="agentPhone" placeholder="Phone Number">
  <select id="agentState">
    <option>Sokoto</option><option>Kano</option><option>Lagos</option>
    <option>Kaduna</option><option>Abuja</option>
  </select>
  <input type="text" id="agentLGA" placeholder="LGA">
  <input type="text" id="agentArea" placeholder="Area">
  <input type="url" id="agentWhatsapp" placeholder="WhatsApp link (optional)">
  <input type="url" id="agentFacebook" placeholder="Facebook link (optional)">
  <input type="url" id="agentInstagram" placeholder="Instagram link (optional)">
  <input type="url" id="agentTiktok" placeholder="TikTok link (optional)">
  <button onclick="registerAgent()">Register Agent</button>
</div>

<!-- Footer -->
<footer>
  <p>Â© 2025 SokotXpress</p>
  <div class="social-icons">
    <a href="https://wa.me/2348012345678" target="_blank">WhatsApp</a>
    <a href="https://facebook.com/sokotxpress" target="_blank">Facebook</a>
    <a href="https://instagram.com/sokotxpress" target="_blank">Instagram</a>
    <a href="https://tiktok.com/@sokotxpress" target="_blank">TikTok</a>
  </div>
</footer>

<script>
  // Local storage simulation
  let users = JSON.parse(localStorage.getItem("users")) || [];
  let agents = JSON.parse(localStorage.getItem("agents")) || [];
  let currentUser = localStorage.getItem("currentUser");

  function showSection(id){
    document.querySelectorAll('.container').forEach(c=>c.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
  }

  function registerUser(){
    let user = {
      name: document.getElementById("regName").value,
      username: document.getElementById("regUsername").value,
      phone: document.getElementById("regPhone").value,
      pass: document.getElementById("regPass").value
    };
    users.push(user);
    localStorage.setItem("users", JSON.stringify(users));
    alert("Registration successful! Please login.");
  }

  function loginUser(){
    let u = document.getElementById("loginUser").value;
    let p = document.getElementById("loginPass").value;
    let found = users.find(x=>x.username===u && x.pass===p);
    if(found){
      currentUser = u;
      localStorage.setItem("currentUser", u);
      document.getElementById("authSection").classList.add("hidden");
      showSection('home');
    } else { alert("Invalid login"); }
  }

  function logout(){
    localStorage.removeItem("currentUser");
    location.reload();
  }

  function registerAgent(){
    let reader = new FileReader();
    let file = document.getElementById("agentPic").files[0];
    reader.onload = function(e){
      let agent = {
        pic: e.target.result,
        name: document.getElementById("agentName").value,
        username: document.getElementById("agentUsername").value,
        phone: document.getElementById("agentPhone").value,
        state: document.getElementById("agentState").value,
        lga: document.getElementById("agentLGA").value,
        area: document.getElementById("agentArea").value,
        whatsapp: document.getElementById("agentWhatsapp").value,
        facebook: document.getElementById("agentFacebook").value,
        instagram: document.getElementById("agentInstagram").value,
        tiktok: document.getElementById("agentTiktok").value
      };
      agents.push(agent);
      localStorage.setItem("agents", JSON.stringify(agents));
      alert("Agent Registered Successfully");
    }
    if(file){ reader.readAsDataURL(file); }
  }

  function searchAgents(){
    let q = document.getElementById("searchAgent").value.toLowerCase();
    let list = document.getElementById("agentList");
    list.innerHTML="";
    agents.filter(a=>a.username.toLowerCase().includes(q)||a.phone.includes(q)||a.area.toLowerCase().includes(q)||a.state.toLowerCase().includes(q))
      .forEach(a=>{
        list.innerHTML += `
          <div class="agent-card">
            <img src="${a.pic}" alt="agent">
            <h3>${a.name} (${a.username})</h3>
            <p>${a.phone}, ${a.area}, ${a.lga}, ${a.state}</p>
            <div class="social-icons">
              ${a.whatsapp?`<a href="${a.whatsapp}" target="_blank">WA</a>`:""}
              ${a.facebook?`<a href="${a.facebook}" target="_blank">FB</a>`:""}
              ${a.instagram?`<a href="${a.instagram}" target="_blank">IG</a>`:""}
              ${a.tiktok?`<a href="${a.tiktok}" target="_blank">TT</a>`:""}
            </div>
          </div>`;
      });
  }

  // Auto-login check
  if(currentUser){
    document.getElementById("authSection").classList.add("hidden");
    showSection('home');
  }
</script>

</body>
</html>
